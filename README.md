# –ü–æ–∏—Å–∫ –∞–Ω–∞–ª–æ–≥–æ–≤ —Å—Ç–∞–ª–µ–π v3.0

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø–æ–∏—Å–∫–∞ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω—ã—Ö –º–∞—Ä–æ–∫ —Å—Ç–∞–ª–µ–π –º–µ–∂–¥—É —Ç—Ä–µ–º—è —Å—Ç—Ä–∞–Ω–∞–º–∏ (–°–®–ê, –†–æ—Å—Å–∏—è, –ö–∏—Ç–∞–π) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ç—Ä—ë—Ö—ç—Ç–∞–ø–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**Three-Stage Pipeline:**
1. **Tavily API** ‚Üí –ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ç–∞–ª—è—Ö (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã)
2. **DeepSeek API** ‚Üí –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
3. **OpenAI API** ‚Üí –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Ñ–∞–∫—Ç—á–µ–∫–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –∫–ª—é—á–µ–π

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ –ø—Ä–∏–º–µ—Ä–∞ –Ω–∏–∂–µ):

```env
# Tavily API (Stage 1: Search)
TAVILY_API_KEY=your_tavily_api_key_here

# DeepSeek API (Stage 2: Processing)
DEEPSEEK_API_KEY=your_deepseek_api_key_here

# OpenAI API (Stage 3: Validation)
OPENAI_API_KEY=your_openai_api_key_here

# Server
PORT=3000
```

**–í–∞–∂–Ω–æ:** –§–∞–π–ª `.env` –Ω–µ –≤–∫–ª—é—á–µ–Ω –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø–æ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –°–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ –≤—Ä—É—á–Ω—É—é –ø–æ—Å–ª–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞.

### 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
npm start
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ: **http://localhost:3000**

## üìä API Endpoints

### POST /api/search
–ü–æ–∏—Å–∫ –∞–Ω–∞–ª–æ–≥–æ–≤ —Å—Ç–∞–ª–∏

**Request:**
```json
{
  "steel_grade": "AISI 304"
}
```

**Response:**
```json
{
  "status": "success",
  "steel_input": "AISI 304",
  "analogs": {
    "USA": { ... },
    "Russia": { ... },
    "China": { ... }
  },
  "validation": {
    "passed": true,
    "overall_score": 95.3,
    ...
  }
}
```

### GET /api/config
–ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

### POST /api/config
–û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

### DELETE /api/cache
–û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à

### GET /api/cache/:steel_grade
–ü–æ–ª—É—á–∏—Ç—å –∑–∞–ø–∏—Å—å –∏–∑ –∫—ç—à–∞

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
steel_analog_finder/
‚îú‚îÄ‚îÄ server/
‚îÇ   ‚îú‚îÄ‚îÄ server.js               # Express –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ searchEngine.js         # –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω–≤–µ–π–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ config.js               # –ú–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ cacheManager.js         # –ú–µ–Ω–µ–¥–∂–µ—Ä –∫—ç—à–∞
‚îÇ   ‚îú‚îÄ‚îÄ promptBuilder.js        # –ü–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª—å –ø—Ä–æ–º–ø—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ utils.js                # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ clients/                # API –∫–ª–∏–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tavilyClient.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ deepseekClient.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ openaiClient.js
‚îÇ   ‚îî‚îÄ‚îÄ stages/                 # –≠—Ç–∞–ø—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îÇ       ‚îú‚îÄ‚îÄ stage1_search.js
‚îÇ       ‚îú‚îÄ‚îÄ stage2_process.js
‚îÇ       ‚îî‚îÄ‚îÄ stage3_validate.js
‚îú‚îÄ‚îÄ public/                     # Frontend
‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îú‚îÄ‚îÄ script.js
‚îÇ   ‚îî‚îÄ‚îÄ styles.css
‚îú‚îÄ‚îÄ data/                       # –î–∞–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ cache.json
‚îÇ   ‚îî‚îÄ‚îÄ config.json
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ README.md
```

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ù–µ—Ä–∂–∞–≤–µ—é—â–∞—è —Å—Ç–∞–ª—å
```bash
curl -X POST http://localhost:3000/api/search \
  -H "Content-Type: application/json" \
  -d '{"steel_grade": "AISI 304"}'
```

### –ü—Ä–∏–º–µ—Ä 2: –ö–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–æ–Ω–Ω–∞—è —Å—Ç–∞–ª—å
```bash
curl -X POST http://localhost:3000/api/search \
  -H "Content-Type: application/json" \
  -d '{"steel_grade": "09–ì2–°"}'
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `data/config.json`:

```json
{
  "cache_enabled": true,
  "validation_strictness": "medium",
  "max_iterations": 3,
  "tavily_max_results": 5,
  "deepseek_temperature": 0.7,
  "openai_temperature": 0.3,
  "openai_model": "gpt-4o-mini"
}
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
- Stage 1 (Tavily): 5-10 —Å–µ–∫
- Stage 2 (DeepSeek): 10-15 —Å–µ–∫
- Stage 3 (OpenAI): 5-10 —Å–µ–∫
- **–ò—Ç–æ–≥–æ**: 20-35 —Å–µ–∫

**–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã: < 1 —Å–µ–∫
- –≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏: 95%

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Node.js** 22+
- **Express.js** 4.18+
- **Tavily API** - –ø–æ–∏—Å–∫ –¥–∞–Ω–Ω—ã—Ö
- **DeepSeek API** - –æ–±—Ä–∞–±–æ—Ç–∫–∞
- **OpenAI API** - –≤–∞–ª–∏–¥–∞—Ü–∏—è

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–∞—Ö:
- `CURSOR_INSTRUCTIONS_V3.md` - –ü–æ–ª–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `–ü—Ä–æ–º–ø—Ç—ã –¥–ª—è —Ç—Ä—ë—Ö—ç—Ç–∞–ø–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (v3.0).md` - –î–µ—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã
- `–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (v3.0).md` - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ

## üéâ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ. –í—Å–µ —Ç—Ä–∏ —ç—Ç–∞–ø–∞ (Tavily ‚Üí DeepSeek ‚Üí OpenAI) –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã.

