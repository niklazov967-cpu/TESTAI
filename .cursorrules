# Конфигурация распределения ролей между моделями Cursor

## ⚠️ Важно: Минимизация циклов обработки
- Использовать минимальное количество циклов для выполнения задачи
- Избегать множественных итераций без явной необходимости
- Один проход предпочтительнее нескольких циклов
- Cycle Agent Count должен быть минимальным (1-2 цикла максимум)

## Распределение задач между Composer 1 и Sonnet 4.5

### Composer 1 (Основной исполнитель)
**Роль:** Генерация и редактирование кода
**Используется для:**
- Создание новых файлов и компонентов
- Рефакторинг существующего кода
- Исправление синтаксических ошибок
- Реализация функций по спецификации
- Работа с файловой структурой проекта
- Быстрые итерации разработки

**Примеры задач:**
- "Создай новый компонент для..."
- "Исправь ошибку в файле..."
- "Добавь функцию..."
- "Рефакторинг кода..."

### Sonnet 4.5 (Аналитик и валидатор)
**Роль:** Анализ, планирование и проверка качества
**Используется для:**
- Архитектурное планирование
- Анализ сложных проблем
- Проверка логики и алгоритмов
- Оптимизация производительности
- Проверка безопасности кода
- Рецензирование кода от Composer 1
- Сложные рассуждения и принятие решений

**Примеры задач:**
- "Проанализируй архитектуру..."
- "Проверь правильность логики..."
- "Найди потенциальные проблемы..."
- "Оптимизируй производительность..."
- "Проверь безопасность..."

## Правила работы

### Последовательность выполнения
1. **Планирование** → Sonnet 4.5 анализирует задачу и создает план
2. **Реализация** → Composer 1 выполняет план и создает код
3. **Проверка** → Sonnet 4.5 проверяет результат (только для сложных задач)

### Автоматическое распределение
- Простые задачи (1-2 файла) → Composer 1 (один проход)
- Средние задачи (3-5 файлов) → Composer 1 + проверка Sonnet 4.5 (один проход)
- Сложные задачи (архитектура, рефакторинг) → Sonnet 4.5 планирует → Composer 1 реализует → Sonnet 4.5 проверяет

### Cycle Agent Count (минимизировано)
- Простые задачи: 1 цикл
- Средние задачи: 1-2 цикла (максимум)
- Сложные задачи: 2 цикла (максимум)
- Избегать множественных итераций без необходимости

## Специфика проекта (Поиск аналогов сталей)

### Composer 1 отвечает за:
- Реализацию API endpoints
- Создание новых этапов обработки
- Работу с клиентами API (Tavily, DeepSeek, OpenAI)
- Управление кэшем и конфигурацией
- Frontend компоненты (HTML, CSS, JS)

### Sonnet 4.5 отвечает за:
- Анализ промптов и их оптимизацию
- Проверку логики валидации
- Оптимизацию алгоритмов поиска
- Анализ производительности конвейера
- Проверку корректности химических формул и расчетов

## Инструкции для моделей

### Общие правила:
- Выполнять задачи за минимальное количество циклов (1-2 максимум)
- Избегать повторных проходов, если результат уже удовлетворителен
- Не делать лишних проверок и итераций

### При работе с промптами:
- Sonnet 4.5 анализирует эффективность промптов (один проход)
- Composer 1 реализует изменения в файлах промптов (один проход)

### При работе с API:
- Sonnet 4.5 планирует структуру запросов и обработку ошибок (один проход)
- Composer 1 реализует клиенты и обработчики (один проход)

### При работе с валидацией:
- Sonnet 4.5 проверяет логику валидации и веса критериев (один проход)
- Composer 1 реализует изменения в коде валидации (один проход)
